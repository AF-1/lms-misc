-- PlaylistName:* Rated - by GENRE + DECADE
-- PlaylistGroups:
-- PlaylistParameter1:genre:Select genre:
-- PlaylistParameter2:customdecade:Select decade:select floor(tracks.year/10)*10,case when tracks.year>0 then concat(floor(tracks.year/10)*10,'s') else 'Unknown' end from tracks where tracks.audio=1 group by floor(tracks.year/10)*10 order by tracks.year desc

select tracks.url from tracks
	join genre_track on
		tracks.id=genre_track.track
	join genres on
		genre_track.genre=genres.id
		and genre_track.genre='PlaylistParameter1'
	join tracks_persistent on
		tracks.url=tracks_persistent.url and tracks_persistent.rating > 0
	left join comments as excludecomments on
		tracks.id=excludecomments.track and excludecomments.value like '%%never%%'
	left join dynamicplaylist_history on
		tracks.id=dynamicplaylist_history.id and dynamicplaylist_history.client='PlaylistPlayer'
	where
		audio=1
		and dynamicplaylist_history.id is null
		and excludecomments.id is null
		and tracks.secs>90
		and tracks.year>='PlaylistParameter2' and tracks.year<'PlaylistParameter2'+10
	group by tracks.id
	order by random()
	limit 20;
